#L1Topo Constraints File
#Model: VX690
#Processor Units: U1, U2

# #MGT RxP Pin Constraints (RxN,TxP,TxN are then constrained automatically)
# #AV1
# #MGT[X/H]RXP[0..4]_110
# set_property PACKAGE_PIN BD8 [get_ports {RxP[0]}]
# set_property PACKAGE_PIN BC6 [get_ports {RxP[1]}]
# set_property PACKAGE_PIN BA6 [get_ports {RxP[2]}]
# set_property PACKAGE_PIN AW6 [get_ports {RxP[3]}]
# # #MGT[X/H]RXP[0..4]_111
# set_property PACKAGE_PIN AV8 [get_ports {RxP[4]}]
# set_property PACKAGE_PIN AU6 [get_ports {RxP[5]}]
# set_property PACKAGE_PIN AR6 [get_ports {RxP[6]}]
# set_property PACKAGE_PIN AP8 [get_ports {RxP[7]}]
# # #MGT[X/H]RXP[0..4]_112
# set_property PACKAGE_PIN AN6 [get_ports {RxP[8]}]
# set_property PACKAGE_PIN AM4 [get_ports {RxP[9]}]
# set_property PACKAGE_PIN AM8 [get_ports {RxP[10]}]
# set_property PACKAGE_PIN AL6 [get_ports {RxP[11]}]
# #AV2
#MGT[X/H]RXP[0..4]_113
set_property PACKAGE_PIN AK8 [get_ports {RxP[12]}]
set_property PACKAGE_PIN AJ6 [get_ports {RxP[13]}]
set_property PACKAGE_PIN AG6 [get_ports {RxP[14]}]
set_property PACKAGE_PIN AE6 [get_ports {RxP[15]}]
#MGT[X/H]RXP[0..4]_114
set_property PACKAGE_PIN AD8 [get_ports {RxP[16]}]
set_property PACKAGE_PIN AC6 [get_ports {RxP[17]}]
set_property PACKAGE_PIN AA6 [get_ports {RxP[18]}]
set_property PACKAGE_PIN Y8 [get_ports {RxP[19]}]
#MGT[X/H]RXP[0..4]_115
set_property PACKAGE_PIN W6 [get_ports {RxP[20]}]
set_property PACKAGE_PIN V8 [get_ports {RxP[21]}]
set_property PACKAGE_PIN U6 [get_ports {RxP[22]}]
set_property PACKAGE_PIN T8 [get_ports {RxP[23]}]
#AV3
#MGT[X/H]RXP[0..4]_116
set_property PACKAGE_PIN R6 [get_ports {RxP[24]}]
set_property PACKAGE_PIN P8 [get_ports {RxP[25]}]
set_property PACKAGE_PIN N6 [get_ports {RxP[26]}]
set_property PACKAGE_PIN M8 [get_ports {RxP[27]}]
# #MGT[X/H]RXP[0..4]_117
set_property PACKAGE_PIN L6 [get_ports {RxP[28]}]
set_property PACKAGE_PIN K8 [get_ports {RxP[29]}]
set_property PACKAGE_PIN J6 [get_ports {RxP[30]}]
set_property PACKAGE_PIN H8 [get_ports {RxP[31]}]
# #MGT[X/H]RXP[0..4]_118
set_property PACKAGE_PIN G6 [get_ports {RxP[32]}]
set_property PACKAGE_PIN F8 [get_ports {RxP[33]}]
set_property PACKAGE_PIN E6 [get_ports {RxP[34]}]
set_property PACKAGE_PIN D8 [get_ports {RxP[35]}]
# #AV4
#MGT[X/H]RXP[0..4]_119
# set_property PACKAGE_PIN D4 [get_ports {RxP[36]}]
# set_property PACKAGE_PIN C6 [get_ports {RxP[37]}]
# set_property PACKAGE_PIN B8 [get_ports {RxP[38]}]
# set_property PACKAGE_PIN A6 [get_ports {RxP[39]}]
#second block after AV7 (see below)
#no third block
# #AV5
# #MGT[X/H]RXP[0..4]_210
# set_property PACKAGE_PIN BD37 [get_ports {RxP[40]}]
# set_property PACKAGE_PIN BC39 [get_ports {RxP[41]}]
# set_property PACKAGE_PIN BA39 [get_ports {RxP[42]}]
# set_property PACKAGE_PIN AW39 [get_ports {RxP[43]}]
# # #MGT[X/H]RXP[0..4]_211
# set_property PACKAGE_PIN AV37 [get_ports {RxP[44]}]
# set_property PACKAGE_PIN AU39 [get_ports {RxP[45]}]
# set_property PACKAGE_PIN AR39 [get_ports {RxP[46]}]
# set_property PACKAGE_PIN AP37 [get_ports {RxP[47]}]
# # #MGT[X/H]RXP[0..4]_212
# set_property PACKAGE_PIN AN39 [get_ports {RxP[48]}]
# set_property PACKAGE_PIN AM41 [get_ports {RxP[49]}]
# set_property PACKAGE_PIN AM37 [get_ports {RxP[50]}]
# set_property PACKAGE_PIN AL39 [get_ports {RxP[51]}]
# # #AV6
# #MGT[X/H]RXP[0..4]_213
# set_property PACKAGE_PIN AK37 [get_ports {RxP[52]}]
# set_property PACKAGE_PIN AJ39 [get_ports {RxP[53]}]
# set_property PACKAGE_PIN AG39 [get_ports {RxP[54]}]
# set_property PACKAGE_PIN AE39 [get_ports {RxP[55]}]
# # #MGT[X/H]RXP[0..4]_214
# set_property PACKAGE_PIN AD37 [get_ports {RxP[56]}]
# set_property PACKAGE_PIN AC39 [get_ports {RxP[57]}]
# set_property PACKAGE_PIN AA39 [get_ports {RxP[58]}]
# set_property PACKAGE_PIN Y37 [get_ports {RxP[59]}]
# # #MGT[X/H]RXP[0..4]_215
# set_property PACKAGE_PIN W39 [get_ports {RxP[60]}]
# set_property PACKAGE_PIN V37 [get_ports {RxP[61]}]
# set_property PACKAGE_PIN U39 [get_ports {RxP[62]}]
# set_property PACKAGE_PIN T37 [get_ports {RxP[63]}]
# # #AV7
# # #MGT[X/H]RxP[0..4]_216
# set_property PACKAGE_PIN R39 [get_ports {RxP[64]}]
# set_property PACKAGE_PIN P37 [get_ports {RxP[65]}]
# set_property PACKAGE_PIN N39 [get_ports {RxP[66]}]
# set_property PACKAGE_PIN M37 [get_ports {RxP[67]}]
# # #MGT[X/H]RxP[0..4]_217
# set_property PACKAGE_PIN L39 [get_ports {RxP[68]}]
# set_property PACKAGE_PIN K37 [get_ports {RxP[69]}]
# set_property PACKAGE_PIN J39 [get_ports {RxP[70]}]
# set_property PACKAGE_PIN H37 [get_ports {RxP[71]}]
# # #MGT[X/H]RxP[0..4]_218
# set_property PACKAGE_PIN G39 [get_ports {RxP[72]}]
# set_property PACKAGE_PIN F37 [get_ports {RxP[73]}]
# set_property PACKAGE_PIN E39 [get_ports {RxP[74]}]
# set_property PACKAGE_PIN D37 [get_ports {RxP[75]}]
# # #AV4 (again)
# # #second block of AV4:
# # #MGT[X/H]RxP[0..4]_219
# set_property PACKAGE_PIN D41 [get_ports {RxP[76]}]
# set_property PACKAGE_PIN C39 [get_ports {RxP[77]}]
# set_property PACKAGE_PIN B37 [get_ports {RxP[78]}]
# set_property PACKAGE_PIN A39 [get_ports {RxP[79]}]



# #MGT Reference Clock Pin Constraints (MGTREFCLK0N, MGTREFCLK1P, MGTREFCLK1N are then partly constrained automatically)
# Now also constrain the negative pair since either TTC or Crystal MGT Reference Clock is constrained automatically
# #AV1
# #MGTREFCLK0P_110 TTC JC
# set_property PACKAGE_PIN AY7 [get_ports {MgtRefClk0N[0]}]
# # #MGTREFCLK0P_110 Crystal
# set_property PACKAGE_PIN BB7 [get_ports {MgtRefClk1N[0]}]
# # #MGTREFCLK0P_111
# set_property PACKAGE_PIN AR9 [get_ports {MgtRefClk0N[1]}]
# set_property PACKAGE_PIN AT7 [get_ports {MgtRefClk1N[1]}]
# # #MGTREFCLK0P_112
# set_property PACKAGE_PIN AL9 [get_ports {MgtRefClk0N[2]}]
# set_property PACKAGE_PIN AN9 [get_ports {MgtRefClk1N[2]}]
#AV2
#MGTREFCLK0P_113 TTC JC
set_property PACKAGE_PIN AF7 [get_ports {MgtRefClk0N[3]}]
#MGTREFCLK0P_113 Crystal
set_property PACKAGE_PIN AH7 [get_ports {MgtRefClk1N[3]}]
#MGTREFCLK0P_114
set_property PACKAGE_PIN AA9 [get_ports {MgtRefClk0N[4]}]
set_property PACKAGE_PIN AB7 [get_ports {MgtRefClk1N[4]}]
#MGTREFCLK0P_115
set_property PACKAGE_PIN U9 [get_ports {MgtRefClk0N[5]}]
set_property PACKAGE_PIN W9 [get_ports {MgtRefClk1N[5]}]
#AV3
# #MGTREFCLK0P_116 TTC JC
set_property PACKAGE_PIN N9 [get_ports {MgtRefClk0N[6]}]
# #MGTREFCLK0P_116 Crystal
set_property PACKAGE_PIN R9 [get_ports {MgtRefClk1N[6]}]
# #MGTREFCLK0P_117
set_property PACKAGE_PIN J9 [get_ports {MgtRefClk0N[7]}]
set_property PACKAGE_PIN L9 [get_ports {MgtRefClk1N[7]}]
# #MGTREFCLK0P_118 TTC JC
set_property PACKAGE_PIN E9 [get_ports {MgtRefClk0N[8]}]
# #MGTREFCLK0P_118 Crystal
set_property PACKAGE_PIN G9 [get_ports {MgtRefClk1N[8]}]
# #AV4
# #MGTREFCLK0P_119
set_property PACKAGE_PIN A9 [get_ports {MgtRefClk0N[9]}]
set_property PACKAGE_PIN C9 [get_ports {MgtRefClk1N[9]}]
# #second block after AV7 (see below)
# #no third block
# # #AV5
# # #MGTREFCLK0P_210 TTC JC
# set_property PACKAGE_PIN AY38 [get_ports {MgtRefClk0N[10]}]
# # #MGTREFCLK0P_210 Crystal
# set_property PACKAGE_PIN BB38 [get_ports {MgtRefClk1N[10]}]
# # #MGTREFCLK0P_211
# set_property PACKAGE_PIN AR36 [get_ports {MgtRefClk0N[11]}]
# set_property PACKAGE_PIN AT38 [get_ports {MgtRefClk1N[11]}]
# # #MGTREFCLK0P_212
# set_property PACKAGE_PIN AL36 [get_ports {MgtRefClk0N[12]}]
# set_property PACKAGE_PIN AN36 [get_ports {MgtRefClk1N[12]}]
# # #AV6
# # #MGTREFCLK0P_213 TTC JC
# set_property PACKAGE_PIN AF38 [get_ports {MgtRefClk0N[13]}]
# # #MGTREFCLK0P_213 Crystal
# set_property PACKAGE_PIN AH38 [get_ports {MgtRefClk1N[13]}]
# # #MGTREFCLK0P_214
# set_property PACKAGE_PIN AA36 [get_ports {MgtRefClk0N[14]}]
# set_property PACKAGE_PIN AB38 [get_ports {MgtRefClk1N[14]}]
# # #MGTREFCLK0P_215
# set_property PACKAGE_PIN U36 [get_ports {MgtRefClk0N[15]}]
# set_property PACKAGE_PIN W36 [get_ports {MgtRefClk1N[15]}]
# # #AV7
# # #MGTREFCLK0P_216 TTC JC
# set_property PACKAGE_PIN N36 [get_ports {MgtRefClk0N[16]}]
# # #MGTREFCLK0P_216 Crystal
# set_property PACKAGE_PIN R36 [get_ports {MgtRefClk1N[16]}]
# # #MGTREFCLK0P_217
# set_property PACKAGE_PIN J36 [get_ports {MgtRefClk0N[17]}]
# set_property PACKAGE_PIN L36 [get_ports {MgtRefClk1N[17]}]
# # #MGTREFCLK0P_218 TTC JC
# set_property PACKAGE_PIN E36 [get_ports {MgtRefClk0N[18]}]
# # #MGTREFCLK0P_218 Crystal
# set_property PACKAGE_PIN G36 [get_ports {MgtRefClk1N[18]}]
# # #AV4 (again)
# # #second block of AV4:
# # #MGTREFCLK0P_219
# set_property PACKAGE_PIN A36 [get_ports {MgtRefClk0N[19]}]
# set_property PACKAGE_PIN C36 [get_ports {MgtRefClk1N[19]}]



#LHC Clock Pins
# LHC Clock from TTC Dec
#set_property PACKAGE_PIN H28 [get_ports LhcClkInP]
#Crystal Clock
# set_property PACKAGE_PIN K27 [get_ports LhcClkInP]
#set_property IOSTANDARD LVDS [get_ports LhcClkInP]
#set_property IOSTANDARD LVDS [get_ports LhcClkInN]

#TTC Clock Pins
set_property PACKAGE_PIN H28 [get_ports GCK1_P]
set_property IOSTANDARD LVDS [get_ports GCK1_P]
set_property IOSTANDARD LVDS [get_ports GCK1_N]
create_clock -period 24.98 -name GCK1_CLK -waveform {0.000 12.475} [get_ports GCK1_P]

#Crystal Clock Pins
set_property PACKAGE_PIN K27 [get_ports GCK2_P]
set_property IOSTANDARD LVDS [get_ports GCK2_P]
set_property IOSTANDARD LVDS [get_ports GCK2_N]
create_clock -period 24.98 -name GCK2_CLK -waveform {0.000 12.475} [get_ports GCK2_P]


#Clock Constraints
create_clock -period 6.237 -name MGT_REF_CLK0 -waveform {0.000 3.118} [get_ports {MgtRefClk0P[3] MgtRefClk0P[4] MgtRefClk0P[5] MgtRefClk0P[6] MgtRefClk0P[7] MgtRefClk0P[8] MgtRefClk0P[9]}]
# MgtRefClk0P[10] MgtRefClk0P[11] MgtRefClk0P[12] MgtRefClk0P[13] MgtRefClk0P[14] MgtRefClk0P[15] MgtRefClk0P[16] MgtRefClk0P[17] MgtRefClk0P[18] MgtRefClk0P[19]}]
create_clock -period 6.237 -name MGT_REF_CLK1 -waveform {0.000 3.118} [get_ports {MgtRefClk1P[3] MgtRefClk1P[4] MgtRefClk1P[5] MgtRefClk1P[6] MgtRefClk1P[7] MgtRefClk1P[8] MgtRefClk1P[9]}]
# MgtRefClk1P[10] MgtRefClk1P[11] MgtRefClk1P[12] MgtRefClk1P[13] MgtRefClk1P[14] MgtRefClk1P[15] MgtRefClk1P[16] MgtRefClk1P[17] MgtRefClk1P[18] MgtRefClk1P[19]}]
#create_clock -period 24.950 -name BC_CLK -waveform {0.000 12.475} [get_ports LhcClkInP]

#set_false_path -from [get_pins {andreas/GT_Inout_I/Gen_DeserializerCrc[*].DeserializerCrc_I/charisk_sr_reg[*]/C}] -to [get_pins {andreas/GT_Inout_I/shift_reg_delay_reg[*][*]/D}]
#set_false_path -from [get_pins {andreas/DataShift40MHz_reg[*][*]/C}] -to [get_pins {andreas/GT_Inout_I/shift_reg_delay_reg[*][*]/D}]
set_false_path -from [get_pins {andreas/QuadControl2_reg[*][*]/C}] -to [get_pins {andreas/QuadControl_reg[*][*]/D}]
#VIO_GT_ChannelStatus_reg irgendwie kann ich das Netz vorher nicht auf false path setzen-->noch bissl ausprobieren
set_false_path -from [get_pins {andreas/ChannelStatus2_reg[*]/C}] -to [get_pins {andreas/VIO_GT_ChannelStatus_reg[*]/D}]
# set_false_path -from [get_pins {GT_Inout_I/vio_128_bit_align_debug_I/inst/PROBE_OUT_ALL_INST/G_PROBE_OUT[0].PROBE_OUT0_INST/Probe_out_reg[*]/C}] -to [get_pins {GT_Inout_I/SubShift0D_reg[*]/D}]
# set_false_path -from [get_pins {GT_Inout_I/vio_128_bit_align_debug_I/inst/PROBE_OUT_ALL_INST/G_PROBE_OUT[0].PROBE_OUT0_INST/Probe_out_reg[*]/C}] -to [get_pins {GT_Inout_I/SubShift1D_reg[*]/D}]
# set_false_path -from [get_pins {GT_Inout_I/vio_128_bit_align_debug_I/inst/PROBE_OUT_ALL_INST/G_PROBE_OUT[0].PROBE_OUT0_INST/Probe_out_reg[*]/C}] -to [get_pins {GT_Inout_I/SubShift2D_reg[*]/D}]
# set_false_path -from [get_pins {GT_Inout_I/vio_128_bit_align_debug_I/inst/PROBE_OUT_ALL_INST/G_PROBE_OUT[0].PROBE_OUT0_INST/Probe_out_reg[*]/C}] -to [get_pins {GT_Inout_I/SubShift3D_reg[*]/D}]
# set_false_path -from [get_pins {GT_Inout_I/vio_128_bit_align_debug_I/inst/PROBE_OUT_ALL_INST/G_PROBE_OUT[4].PROBE_OUT0_INST/Probe_out_reg[0]/C}] -to [get_pins {GT_Inout_I/ChannelsRingOnD_reg[*]/D}]
# set_false_path -from [get_pins {GT_Inout_I/vio_128_bit_align_debug_I/inst/PROBE_OUT_ALL_INST/G_PROBE_OUT[5].PROBE_OUT0_INST/Probe_out_reg[*]/C}] -to [get_pins {GT_Inout_I/ChannelSTD_D_reg[*]/D}]
# set_false_path -from [get_pins {GT_Inout_I/DeadTimeSTD_reg[*]/C}] -to [get_pins {GT_Inout_I/vio_128_bit_align_debug_I/inst/PROBE_IN_INST/probe_in_reg_reg[*]/D}]





--outgoing IPbus lines
NET CTRLBUS_P_21	 LOC=BD29	 | IOSTANDARD=LVDS	 | DIFF_TERM=FALSE;		 #bank 14
NET CTRLBUS_N_21	 LOC=BD30	 | IOSTANDARD=LVDS	 | DIFF_TERM=FALSE;
NET CTRLBUS_P_22	 LOC=BB30	 | IOSTANDARD=LVDS	 | DIFF_TERM=FALSE;		 #bank 14
NET CTRLBUS_N_22	 LOC=BC30	 | IOSTANDARD=LVDS	 | DIFF_TERM=FALSE;
NET CTRLBUS_P_23	 LOC=BC28	 | IOSTANDARD=LVDS	 | DIFF_TERM=FALSE;		 #bank 14
NET CTRLBUS_N_23	 LOC=BC29	 | IOSTANDARD=LVDS	 | DIFF_TERM=FALSE;

--incoming IPbus lines
NET CTRLBUS_P_24	 LOC=BA29	 | IOSTANDARD=LVDS	 | DIFF_TERM=TRUE;		 #bank 14
NET CTRLBUS_N_24	 LOC=BA30	 | IOSTANDARD=LVDS	 | DIFF_TERM=TRUE;
NET CTRLBUS_P_25	 LOC=AW29	 | IOSTANDARD=LVDS	 | DIFF_TERM=TRUE;		 #bank 14
NET CTRLBUS_N_25	 LOC=AY29	 | IOSTANDARD=LVDS	 | DIFF_TERM=TRUE;
NET CTRLBUS_P_26	 LOC=AW27	 | IOSTANDARD=LVDS	 | DIFF_TERM=TRUE;		 #bank 14
NET CTRLBUS_N_26	 LOC=AY27	 | IOSTANDARD=LVDS	 | DIFF_TERM=TRUE;

NET CTRLBUS_P_28	 LOC=AY28	 | IOSTANDARD=LVDS	 | DIFF_TERM=TRUE;		 #bank 14
NET CTRLBUS_N_28	 LOC=BA28	 | IOSTANDARD=LVDS	 | DIFF_TERM=TRUE;

NET CTRLBUS_P_40	 LOC=AJ29	 | IOSTANDARD=LVDS	 | DIFF_TERM=TRUE;		 #bank 14
NET CTRLBUS_N_40	 LOC=AK29	 | IOSTANDARD=LVDS	 | DIFF_TERM=TRUE;



--delay_inc lines
NET CTRLBUS_P_27    LOC=AY31    | IOSTANDARD=LVDS   | DIFF_TERM=TRUE;       #bank 14
NET CTRLBUS_N_27    LOC=BA31    | IOSTANDARD=LVDS   | DIFF_TERM=TRUE;
NET CTRLBUS_P_29    LOC=AW30    | IOSTANDARD=LVDS   | DIFF_TERM=TRUE;       #bank 14
NET CTRLBUS_N_29    LOC=AW31    | IOSTANDARD=LVDS   | DIFF_TERM=TRUE;
NET CTRLBUS_P_31    LOC=AU30    | IOSTANDARD=LVDS   | DIFF_TERM=TRUE;       #bank 14
NET CTRLBUS_N_31    LOC=AV30    | IOSTANDARD=LVDS   | DIFF_TERM=TRUE;
NET CTRLBUS_P_32    LOC=AU28    | IOSTANDARD=LVDS   | DIFF_TERM=TRUE;       #bank 14
NET CTRLBUS_N_32    LOC=AV29    | IOSTANDARD=LVDS   | DIFF_TERM=TRUE;
NET CTRLBUS_P_34    LOC=AP29    | IOSTANDARD=LVDS   | DIFF_TERM=TRUE;       #bank 14
NET CTRLBUS_N_34    LOC=AP30    | IOSTANDARD=LVDS   | DIFF_TERM=TRUE;

